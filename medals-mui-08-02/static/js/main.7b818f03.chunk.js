(this["webpackJsonpmedals-a-react"]=this["webpackJsonpmedals-a-react"]||[]).push([[0],{103:function(e,n,a){},133:function(e,n,a){},134:function(e,n,a){"use strict";a.r(n);var t=a(0),c=a.n(t),r=a(12),o=a.n(r),i=(a(103),a(32)),s=a(21),l=a.n(s),d=a(47),u=a(43),m=a(48),f=a.n(m),p=a(89),j=a(192),b=a(177),g=a(83),h=a.n(g),v=a(84),x=a.n(v),O=a(173),y=a(7),C=Object(O.a)({countryMedal:{marginTop:"10px",display:"flex",alignItems:"center"},medalAvatar:{color:"black"},medalName:{fontSize:"1.4em",paddingLeft:"10px",width:"130px",textTransform:"capitalize"},iconButton:{padding:"2px"},delta:{fontStyle:"italic",opacity:".7"}}),_=function(e){var n=C(),a=e.medal,t=e.country,c=e.onIncrement,r=e.onDecrement;return Object(y.jsxs)("div",{className:n.countryMedal,children:[Object(y.jsx)(j.a,{style:{backgroundColor:a.RGBColor},className:n.medalAvatar,children:t[a.name].page_value}),t[a.name].page_value!==t[a.name].saved_value?Object(y.jsxs)("span",{className:"".concat(n.medalName," ").concat(n.delta),children:[a.name," Medals"]}):Object(y.jsxs)("span",{className:n.medalName,children:[a.name," Medals"]}),Object(y.jsx)(b.a,{onClick:function(){return c(t.id,a.name)},className:n.iconButton,color:"primary","aria-label":"increment gold",children:Object(y.jsx)(h.a,{fontSize:"large"})}),Object(y.jsx)(b.a,{disabled:0===t[a.name].page_value,onClick:function(){return r(t.id,a.name)},className:n.iconButton,color:"secondary","aria-label":"decrement gold",children:Object(y.jsx)(x.a,{fontSize:"large"})})]})},w=a(178),N=a(181),S=a(180),k=a(179),B=a(87),z=a.n(B),R=a(85),T=a.n(R),A=a(86),E=a.n(A),I=Object(O.a)({country:{marginLeft:"auto",marginRight:"auto",marginTop:10,padding:18,width:260},divider:{marginTop:5,marginBottom:10},countryName:{fontSize:"1.8em",paddingRight:"8px"}}),D=function(e){var n=e.country,a=e.medals,t=e.onIncrement,r=e.onDecrement,o=e.onDelete,i=e.onSave,s=e.onReset,l=I();return Object(y.jsxs)(w.a,{elevation:4,className:l.country,children:[Object(y.jsxs)(k.a,{container:!0,spacing:0,children:[Object(y.jsx)(k.a,{item:!0,xs:8,children:Object(y.jsx)(S.a,{badgeContent:function(e,n){var a=0;return n.forEach((function(n){a+=e[n.name].page_value})),a}(n,a),color:"primary",children:Object(y.jsx)("div",{className:l.countryName,children:n.name})})}),Object(y.jsx)(k.a,{style:{textAlign:"right"},item:!0,xs:4,children:function(){var e=!1;return a.forEach((function(a){n[a.name].page_value!==n[a.name].saved_value&&(e=!0)})),e}()?Object(y.jsxs)(c.a.Fragment,{children:[Object(y.jsx)(b.a,{"aria-label":"save",onClick:function(){return i(n.id)},style:{padding:6},children:Object(y.jsx)(T.a,{fontSize:"medium",color:"primary"})}),Object(y.jsx)(b.a,{"aria-label":"undo",onClick:function(){return s(n.id)},style:{padding:6},children:Object(y.jsx)(E.a,{fontSize:"medium",color:"secondary"})})]}):Object(y.jsx)(b.a,{"aria-label":"delete",onClick:function(){return o(n.id)},style:{padding:6},children:Object(y.jsx)(z.a,{fontSize:"medium"})})})]}),Object(y.jsx)(N.a,{className:l.divider}),a.map((function(e){return Object(y.jsx)(_,{country:n,medal:e,onIncrement:t,onDecrement:r},e.id)}))]})},F=a(182),M=a(88),H=a.n(M),G=a(187),L=a(189),P=a(191),J=a(186),U=a(184),W=a(185),q=a(183),K=Object(O.a)({fab:{position:"fixed",bottom:"1em",right:"1em"}}),Q=function(e){var n=K(),a=Object(t.useState)(!1),r=Object(u.a)(a,2),o=r[0],i=r[1],s=Object(t.useState)(""),l=Object(u.a)(s,2),d=l[0],m=l[1],f=e.onAdd,p=function(){return i(!1)};return Object(y.jsxs)(c.a.Fragment,{children:[Object(y.jsx)(F.a,{onClick:function(){i(!0),m("")},className:n.fab,size:"medium",color:"primary","aria-label":"add",children:Object(y.jsx)(H.a,{})}),Object(y.jsx)(P.a,{open:o,onClose:p,"aria-labelledby":"form-dialog-title",children:Object(y.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),f(d),i(!1)}(e)},children:[Object(y.jsx)(q.a,{id:"form-dialog-title",children:"Add Country"}),Object(y.jsxs)(U.a,{children:[Object(y.jsx)(W.a,{children:"To add a new country, enter the name"}),Object(y.jsx)(L.a,{onChange:function(e){return m(e.target.value)},autoFocus:!0,margin:"dense",id:"name",name:"name",value:d,label:"Country Name",type:"text",fullWidth:!0,autoComplete:"off",autoCapitalize:"off"})]}),Object(y.jsxs)(J.a,{children:[Object(y.jsx)(G.a,{onClick:p,color:"secondary",children:"Cancel"}),Object(y.jsx)(G.a,{disabled:0===d.trim().length,type:"submit",color:"primary",children:"Save"})]})]})})]})},V=a(188),X=(a(133),Object(O.a)({appHeading:{textAlign:"center",margin:0,backgroundColor:"#BBBBF1",position:"fixed",width:"100%",paddingTop:"15px",paddingBottom:"4px",zIndex:"1000",opacity:".95"},appHeadingBadge:{fontSize:"2.0em",fontFamily:"Teko, sans-serif"},appHeadingText:{paddingRight:"8px"}})),Y=function(){var e="https://medalsapi.azurewebsites.net/api/country",n=Object(t.useState)([]),a=Object(u.a)(n,2),r=a[0],o=a[1],s=Object(t.useState)(null),m=Object(u.a)(s,2),j=m[0],b=m[1],g=Object(t.useRef)([{id:1,name:"gold",RGBColor:"#ffc107"},{id:2,name:"silver",RGBColor:"#c4cacc"},{id:3,name:"bronze",RGBColor:"#cd7f32"}]),h=Object(t.useRef)(null);h.current=r;var v=X();Object(t.useEffect)((function(){function n(){return(n=Object(d.a)(l.a.mark((function n(){var a,t,c;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.get(e);case 2:a=n.sent,t=a.data,c=[],t.forEach((function(e){var n={id:e.id,name:e.name};g.current.forEach((function(a){var t=e[a.name];n[a.name]={page_value:t,saved_value:t}})),c.push(n)})),o(c);case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}();var a=(new p.a).withUrl("https://medalsapi.azurewebsites.net/medalsHub").withAutomaticReconnect().build();b(a)}),[]),Object(t.useEffect)((function(){j&&j.start().then((function(){console.log("Connected!"),j.on("ReceiveAddMessage",(function(e){console.log("Add: ".concat(e.name));var n={id:e.id,name:e.name};g.current.forEach((function(a){var t=e[a.name];n[a.name]={page_value:t,saved_value:t}}));var a=Object(i.a)(h.current);a=a.concat(n),o(a)})),j.on("ReceiveDeleteMessage",(function(e){console.log("Delete id: ".concat(e));var n=Object(i.a)(h.current);n=n.filter((function(n){return n.id!==e})),o(n)})),j.on("ReceivePatchMessage",(function(e){console.log("Patch: ".concat(e.name));var n={id:e.id,name:e.name};g.current.forEach((function(a){var t=e[a.name];n[a.name]={page_value:t,saved_value:t}}));var a=Object(i.a)(h.current),t=a.findIndex((function(n){return n.id===e.id}));a[t]=n,o(a)}))})).catch((function(e){return console.log("Connection failed: ",e)}))}),[j]);var x=function(){var n=Object(d.a)(l.a.mark((function n(a){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.post(e,{name:a});case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),O=function(){var n=Object(d.a)(l.a.mark((function n(a){var t;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=r,o(r.filter((function(e){return e.id!==a}))),n.prev=2,n.next=5,f.a.delete("".concat(e,"/").concat(a));case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),n.t0.response&&404===n.t0.response.status?console.log("The record does not exist - it may have already been deleted"):(alert("An error occurred while deleting"),o(t));case 10:case"end":return n.stop()}}),n,null,[[2,7]])})));return function(e){return n.apply(this,arguments)}}(),C=function(){var n=Object(d.a)(l.a.mark((function n(a){var t,c,s,d,u;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=r,c=r.findIndex((function(e){return e.id===a})),s=Object(i.a)(r),d=s[c],u=[],g.current.forEach((function(e){d[e.name].page_value!==d[e.name].saved_value&&(u.push({op:"replace",path:e.name,value:d[e.name].page_value}),d[e.name].saved_value=d[e.name].page_value)})),console.log("json patch for id: ".concat(a,": ").concat(JSON.stringify(u))),o(s),n.prev=8,n.next=11,f.a.patch("".concat(e,"/").concat(a),u);case 11:n.next=16;break;case 13:n.prev=13,n.t0=n.catch(8),n.t0.response&&404===n.t0.response.status?console.log("The record does not exist - it may have already been deleted"):(alert("An error occurred while updating"),o(t));case 16:case"end":return n.stop()}}),n,null,[[8,13]])})));return function(e){return n.apply(this,arguments)}}(),_=function(e){var n=r.findIndex((function(n){return n.id===e})),a=Object(i.a)(r),t=a[n];g.current.forEach((function(e){t[e.name].page_value=t[e.name].saved_value})),o(a)},w=function(e,n){return B(e,n,1)},N=function(e,n){return B(e,n,-1)},B=function(e,n,a){var t=r.findIndex((function(n){return n.id===e})),c=Object(i.a)(r);c[t][n].page_value+=1*a,o(c)};return Object(y.jsxs)(c.a.Fragment,{children:[Object(y.jsx)("div",{className:v.appHeading,children:Object(y.jsx)(S.a,{className:v.appHeadingBadge,badgeContent:function(){var e=0;return g.current.forEach((function(n){e+=r.reduce((function(e,a){return e+a[n.name].page_value}),0)})),e}(),color:"primary",children:Object(y.jsx)("div",{className:v.appHeadingText,children:"Olympic Medals"})})}),Object(y.jsxs)(V.a,{fixed:!0,style:{paddingTop:"70px",paddingBottom:"20px"},children:[Object(y.jsx)(Q,{onAdd:x}),Object(y.jsx)(k.a,{spacing:2,justifyContent:"center",container:!0,children:r.map((function(e){return Object(y.jsx)(k.a,{item:!0,children:Object(y.jsx)(D,{country:e,medals:g.current,onDelete:O,onSave:C,onReset:_,onIncrement:w,onDecrement:N})},e.id)}))})]})]})},Z=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,194)).then((function(n){var a=n.getCLS,t=n.getFID,c=n.getFCP,r=n.getLCP,o=n.getTTFB;a(e),t(e),c(e),r(e),o(e)}))};o.a.render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)(Y,{})}),document.getElementById("root")),Z()}},[[134,1,2]]]);
//# sourceMappingURL=main.7b818f03.chunk.js.map