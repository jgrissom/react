(this["webpackJsonpmedals-a-react"]=this["webpackJsonpmedals-a-react"]||[]).push([[0],{101:function(e,n,t){},131:function(e,n,t){},132:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t.n(a),r=t(12),o=t.n(r),i=(t(101),t(45)),s=t(21),l=t.n(s),d=t(43),u=t(39),m=t(44),j=t.n(m),p=t(87),f=t(190),b=t(175),h=t(83),x=t.n(h),g=t(84),O=t.n(g),v=t(171),y=t(8),C=Object(v.a)({countryMedal:{marginTop:"10px",display:"flex",alignItems:"center"},medalAvatar:{color:"black"},medalName:{fontSize:"1.4em",paddingLeft:"10px",width:"130px",textTransform:"capitalize"},iconButton:{padding:"2px"}}),w=function(e){var n=C(),t=e.medal,a=e.country,c=e.onIncrement,r=e.onDecrement;return Object(y.jsxs)("div",{className:n.countryMedal,children:[Object(y.jsx)(f.a,{style:{backgroundColor:t.RGBColor},className:n.medalAvatar,children:a[t.name]}),Object(y.jsxs)("span",{className:n.medalName,children:[t.name," Medals"]}),Object(y.jsx)(b.a,{onClick:function(){return c(a.id,t.name)},className:n.iconButton,color:"primary","aria-label":"increment gold",children:Object(y.jsx)(x.a,{fontSize:"large"})}),Object(y.jsx)(b.a,{disabled:0===a[t.name],onClick:function(){return r(a.id,t.name)},className:n.iconButton,color:"secondary","aria-label":"decrement gold",children:Object(y.jsx)(O.a,{fontSize:"large"})})]})},B=t(176),N=t(179),k=t(178),S=t(177),T=t(85),z=t.n(T),R=Object(v.a)({country:{marginLeft:"auto",marginRight:"auto",marginTop:10,padding:18,width:260},divider:{marginTop:5,marginBottom:10},countryName:{fontSize:"1.8em",paddingRight:"8px"}}),A=function(e){var n=e.country,t=e.medals,a=e.onIncrement,c=e.onDecrement,r=e.onDelete,o=R();return Object(y.jsxs)(B.a,{elevation:4,className:o.country,children:[Object(y.jsxs)(S.a,{container:!0,spacing:0,children:[Object(y.jsx)(S.a,{item:!0,xs:10,children:Object(y.jsx)(k.a,{badgeContent:function(e,n){var t=0;return n.forEach((function(n){t+=e[n.name]})),t}(n,t),color:"primary",children:Object(y.jsx)("div",{className:o.countryName,children:n.name})})}),Object(y.jsx)(S.a,{item:!0,xs:2,children:Object(y.jsx)(b.a,{"aria-label":"delete",onClick:function(){return r(n.id)},style:{padding:6},children:Object(y.jsx)(z.a,{fontSize:"medium"})})})]}),Object(y.jsx)(N.a,{className:o.divider}),t.map((function(e){return Object(y.jsx)(w,{country:n,medal:e,onIncrement:a,onDecrement:c},e.id)}))]})},D=t(180),I=t(86),F=t.n(I),M=t(185),H=t(187),E=t(189),G=t(184),L=t(182),P=t(183),J=t(181),U=Object(v.a)({fab:{position:"fixed",bottom:"1em",right:"1em"}}),W=function(e){var n=U(),t=Object(a.useState)(!1),r=Object(u.a)(t,2),o=r[0],i=r[1],s=Object(a.useState)(""),l=Object(u.a)(s,2),d=l[0],m=l[1],j=e.onAdd,p=function(){return i(!1)};return Object(y.jsxs)(c.a.Fragment,{children:[Object(y.jsx)(D.a,{onClick:function(){i(!0),m("")},className:n.fab,size:"medium",color:"primary","aria-label":"add",children:Object(y.jsx)(F.a,{})}),Object(y.jsx)(E.a,{open:o,onClose:p,"aria-labelledby":"form-dialog-title",children:Object(y.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),j(d),i(!1)}(e)},children:[Object(y.jsx)(J.a,{id:"form-dialog-title",children:"Add Country"}),Object(y.jsxs)(L.a,{children:[Object(y.jsx)(P.a,{children:"To add a new country, enter the name"}),Object(y.jsx)(H.a,{onChange:function(e){return m(e.target.value)},autoFocus:!0,margin:"dense",id:"name",name:"name",value:d,label:"Country Name",type:"text",fullWidth:!0,autoComplete:"off",autoCapitalize:"off"})]}),Object(y.jsxs)(G.a,{children:[Object(y.jsx)(M.a,{onClick:p,color:"secondary",children:"Cancel"}),Object(y.jsx)(M.a,{disabled:0===d.trim().length,type:"submit",color:"primary",children:"Save"})]})]})})]})},q=t(186),K=(t(131),Object(v.a)({appHeading:{textAlign:"center",margin:0,backgroundColor:"#BBBBF1",position:"fixed",width:"100%",paddingTop:"15px",paddingBottom:"4px",zIndex:"1000",opacity:".95"},appHeadingBadge:{fontSize:"2.0em",fontFamily:"Teko, sans-serif"},appHeadingText:{paddingRight:"8px"}})),Q=function(){var e="https://medalsapi.azurewebsites.net/api/country",n=Object(a.useState)([]),t=Object(u.a)(n,2),r=t[0],o=t[1],s=Object(a.useState)(null),m=Object(u.a)(s,2),f=m[0],b=m[1],h=Object(a.useRef)([{id:1,name:"gold",RGBColor:"#ffc107"},{id:2,name:"silver",RGBColor:"#c4cacc"},{id:3,name:"bronze",RGBColor:"#cd7f32"}]),x=Object(a.useRef)(null);x.current=r;var g=K();Object(a.useEffect)((function(){function n(){return(n=Object(d.a)(l.a.mark((function n(){var t,a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,j.a.get(e);case 2:t=n.sent,a=t.data,o(a);case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}();var t=(new p.a).withUrl("https://medalsapi.azurewebsites.net/medalsHub").withAutomaticReconnect().build();b(t)}),[]),Object(a.useEffect)((function(){f&&f.start().then((function(){console.log("Connected!"),f.on("ReceiveAddMessage",(function(e){console.log("Add: ".concat(e.name));var n=Object(i.a)(x.current);n=n.concat(e),o(n)})),f.on("ReceiveDeleteMessage",(function(e){console.log("Delete id: ".concat(e));var n=Object(i.a)(x.current);n=n.filter((function(n){return n.id!==e})),o(n)})),f.on("ReceivePatchMessage",(function(e){console.log("Patch: ".concat(e.name));var n=Object(i.a)(x.current),t=n.findIndex((function(n){return n.id===e.id}));n[t]=e,o(n)}))})).catch((function(e){return console.log("Connection failed: ",e)}))}),[f]);var O=function(){var n=Object(d.a)(l.a.mark((function n(t){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,j.a.post(e,{name:t});case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),v=function(){var n=Object(d.a)(l.a.mark((function n(t){var a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=r,o(r.filter((function(e){return e.id!==t}))),n.prev=2,n.next=5,j.a.delete("".concat(e,"/").concat(t));case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),n.t0.response&&404===n.t0.response.status?console.log("The record does not exist - it may have already been deleted"):(alert("An error occurred while deleting"),o(a));case 10:case"end":return n.stop()}}),n,null,[[2,7]])})));return function(e){return n.apply(this,arguments)}}(),C=function(e,n){return B(e,n,1)},w=function(e,n){return B(e,n,-1)},B=function(){var n=Object(d.a)(l.a.mark((function n(t,a,c){var s,d,u,m;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=r,d=r.findIndex((function(e){return e.id===t})),(u=Object(i.a)(r))[d][a]+=1*c,o(u),m=[{op:"replace",path:a,value:u[d][a]}],console.log("json patch for id: ".concat(t,": ").concat(JSON.stringify(m))),n.prev=7,n.next=10,j.a.patch("".concat(e,"/").concat(t),m);case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(7),n.t0.response&&404===n.t0.response.status?console.log("The record does not exist - it may have already been deleted"):(alert("An error occurred while updating"),o(s));case 15:case"end":return n.stop()}}),n,null,[[7,12]])})));return function(e,t,a){return n.apply(this,arguments)}}();return Object(y.jsxs)(c.a.Fragment,{children:[Object(y.jsx)("div",{className:g.appHeading,children:Object(y.jsx)(k.a,{className:g.appHeadingBadge,badgeContent:function(){var e=0;return h.current.forEach((function(n){e+=r.reduce((function(e,t){return e+t[n.name]}),0)})),e}(),color:"primary",children:Object(y.jsx)("div",{className:g.appHeadingText,children:"Olympic Medals"})})}),Object(y.jsxs)(q.a,{fixed:!0,style:{paddingTop:"70px",paddingBottom:"20px"},children:[Object(y.jsx)(W,{onAdd:O}),Object(y.jsx)(S.a,{spacing:2,justifyContent:"center",container:!0,children:r.map((function(e){return Object(y.jsx)(S.a,{item:!0,children:Object(y.jsx)(A,{country:e,medals:h.current,onDelete:v,onIncrement:C,onDecrement:w})},e.id)}))})]})]})},V=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,192)).then((function(n){var t=n.getCLS,a=n.getFID,c=n.getFCP,r=n.getLCP,o=n.getTTFB;t(e),a(e),c(e),r(e),o(e)}))};o.a.render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)(Q,{})}),document.getElementById("root")),V()}},[[132,1,2]]]);
//# sourceMappingURL=main.cb6bf4aa.chunk.js.map