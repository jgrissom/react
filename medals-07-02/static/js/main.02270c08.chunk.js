(this["webpackJsonpmedals-b-react"]=this["webpackJsonpmedals-b-react"]||[]).push([[0],{25:function(e,n,t){},47:function(e,n,t){},48:function(e,n,t){"use strict";t.r(n);var a=t(2),r=t.n(a),c=t(19),u=t.n(c),o=(t(25),t(8)),s=t(3),i=t.n(s),l=t(5),d=t(20),f=t(6),m=t.n(f),p=t(0),v=function(e){var n=e.medal,t=e.country,a=e.onIncrement,r=e.onDecrement;return Object(p.jsxs)("div",{className:"medals",children:[t[n.name].page_value!==t[n.name].saved_value?Object(p.jsxs)("span",{className:"delta",children:[n.name," Medals: ",t[n.name].page_value]}):Object(p.jsxs)("span",{children:[n.name," Medals: ",t[n.name].page_value]}),Object(p.jsx)("button",{onClick:function(){return a(t.id,n.name)},children:"+"}),Object(p.jsx)("button",{disabled:0===t[n.name].page_value,onClick:function(){return r(t.id,n.name)},children:"-"})]})},j=function(e){var n=e.country,t=e.medals,a=e.onIncrement,c=e.onDecrement,u=e.onDelete,o=e.onSave,s=e.onReset;return Object(p.jsxs)("div",{className:"country",children:[Object(p.jsxs)("div",{className:"name",children:[n.name,Object(p.jsx)("span",{className:"badge",children:function(e,n){var t=0;return n.forEach((function(n){t+=e[n.name].page_value})),t}(n,t)})]}),t.map((function(e){return Object(p.jsx)(v,{country:n,medal:e,onIncrement:a,onDecrement:c},e.id)})),function(){var e=!1;return t.forEach((function(t){n[t.name].page_value!==n[t.name].saved_value&&(e=!0)})),e}()?Object(p.jsxs)(r.a.Fragment,{children:[Object(p.jsx)("button",{style:{marginLeft:"8px"},onClick:function(){return o(n.id)},children:"save"}),Object(p.jsx)("button",{style:{marginLeft:"8px"},onClick:function(){return s(n.id)},children:"reset"})]}):Object(p.jsx)("button",{onClick:function(){return u(n.id)},children:"delete"}),Object(p.jsx)("hr",{})]})},h=function(e){var n=e.onAdd;return Object(p.jsx)("div",{className:"newCountryButton",children:Object(p.jsx)("button",{onClick:function(){var e=prompt("Enter country name");e&&e.trim().length>0&&n(e)},children:"New Country"})})},b=(t(47),function(){var e="https://medalsapi.azurewebsites.net/api/country",n=Object(a.useState)([]),t=Object(d.a)(n,2),c=t[0],u=t[1],s=Object(a.useRef)([{id:1,name:"gold"},{id:2,name:"silver"},{id:3,name:"bronze"}]);Object(a.useEffect)((function(){function n(){return(n=Object(l.a)(i.a.mark((function n(){var t,a,r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.get(e);case 2:t=n.sent,a=t.data,r=[],a.forEach((function(e){var n={id:e.id,name:e.name};s.current.forEach((function(t){var a=e[t.name];n[t.name]={page_value:a,saved_value:a}})),r.push(n)})),u(r);case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[]);var f=function(){var n=Object(l.a)(i.a.mark((function n(t){var a,r,o;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.post(e,{name:t});case 2:a=n.sent,r=a.data,o={id:r.id,name:r.name},s.current.forEach((function(e){var n=r[e.name];o[e.name]={page_value:n,saved_value:n}})),u(c.concat(o));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),v=function(){var n=Object(l.a)(i.a.mark((function n(t){var a;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=c,u(c.filter((function(e){return e.id!==t}))),n.prev=2,n.next=5,m.a.delete("".concat(e,"/").concat(t));case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),n.t0.response&&404===n.t0.response.status?console.log("The record does not exist - it may have already been deleted"):(alert("An error occurred while deleting"),u(a));case 10:case"end":return n.stop()}}),n,null,[[2,7]])})));return function(e){return n.apply(this,arguments)}}(),b=function(){var n=Object(l.a)(i.a.mark((function n(t){var a,r,l,d,f;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=c,r=c.findIndex((function(e){return e.id===t})),l=Object(o.a)(c),d=l[r],f=[],s.current.forEach((function(e){d[e.name].page_value!==d[e.name].saved_value&&(f.push({op:"replace",path:e.name,value:d[e.name].page_value}),d[e.name].saved_value=d[e.name].page_value)})),console.log("json patch for id: ".concat(t,": ").concat(JSON.stringify(f))),u(l),n.prev=8,n.next=11,m.a.patch("".concat(e,"/").concat(t),f);case 11:n.next=16;break;case 13:n.prev=13,n.t0=n.catch(8),n.t0.response&&404===n.t0.response.status?console.log("The record does not exist - it may have already been deleted"):(alert("An error occurred while updating"),u(a));case 16:case"end":return n.stop()}}),n,null,[[8,13]])})));return function(e){return n.apply(this,arguments)}}(),x=function(e){var n=c.findIndex((function(n){return n.id===e})),t=Object(o.a)(c),a=t[n];s.current.forEach((function(e){a[e.name].page_value=a[e.name].saved_value})),u(t)},O=function(e,n){return y(e,n,1)},g=function(e,n){return y(e,n,-1)},y=function(e,n,t){var a=c.findIndex((function(n){return n.id===e})),r=Object(o.a)(c);r[a][n].page_value+=1*t,u(r)};return Object(p.jsxs)(r.a.Fragment,{children:[Object(p.jsxs)("div",{className:"appHeading",children:["Olympic Medals",Object(p.jsx)("span",{className:"badge",children:function(){var e=0;return s.current.forEach((function(n){e+=c.reduce((function(e,t){return e+t[n.name].page_value}),0)})),e}()})]}),Object(p.jsx)("div",{className:"countries",children:c.map((function(e){return Object(p.jsx)(j,{country:e,medals:s.current,onDelete:v,onSave:b,onReset:x,onIncrement:O,onDecrement:g},e.id)}))}),Object(p.jsx)(h,{onAdd:f})]})}),x=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,49)).then((function(n){var t=n.getCLS,a=n.getFID,r=n.getFCP,c=n.getLCP,u=n.getTTFB;t(e),a(e),r(e),c(e),u(e)}))};u.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(b,{})}),document.getElementById("root")),x()}},[[48,1,2]]]);
//# sourceMappingURL=main.02270c08.chunk.js.map